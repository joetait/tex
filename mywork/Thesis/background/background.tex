\chapter{Background}\label{chapterbackground}

In this section we will introduce the basic concepts, notation and terminology required in the study of algebraic curves.

Throughout this thesis $k$ will denote an algebraically closed field of characteristic $p \geq 0$.
It should be noted that while the majority of results in the thesis hold for all characteristics, including $p=0$, our main focus will be on the case $p > 0$.

When we refer to a \emph{curve} we will mean a smooth, connected, projective variety of dimension one over $k$.
% Similarly, when we refer to an \emph{affine curve} we mean a smooth, connected, affine variety of dimension one over $k$. % Add if needed


A \emph{meromorphic function} on $X$ is a morphism $f \colon X \ra \PP_k^1$.
The collection of meromorphic functions on $X$ is denoted $K(X)$, and called the \emph{function field} of $X$.

We recall that the category of algebraic curves up to birational  equivalence is actually equivalent to the category of function fields over $k$ (which can be defined independently of curves as fields of transcendence degree one over $k$).
Furthermore, if $k = \CC$ then we have a triple equivalence of categories, between function fields over $\CC$, algebraic curves (up to birational equivalence) and the category of compact Riemann surfaces.\todo{References. Maybe Miranda, Stichtenoth and/or Hartshorne.}

We say that a meromorphic function on $X$ is \emph{regular} on an open set $U \subseteq X$ if the image $f(U)$ lies in $k = \AA_k^1 \subset \PP_k^1$.
We let $H^0(U,\cO_X)$ denote the space of functions in $K(X)$ which are regular on $U$.
Moreover, if $f \in K(X)$ is regular on the whole curve we say that $f$ is \emph{regular}, and then $H^1(X,\cO_X)$ is the space of regular functions.

For any $P \in X$ a meromorphic function $f \in K(X)$ is \emph{regular at $P$} if $f(P) \in k \subset \PP_k^1$.
The collection of functions regular at $P$ form a ring, which we call $\cO_{X,P}$.

    \begin{lem}
    For any $P \in X$ the ring $\cO_{X,P}$ is a discrete valuation ring, with maximal ideal
        \[
        \mathcal {M}_{X,P} := \{ f \in \cO_{X,P} | f(P) = 0 \}.
        \]
    \end{lem}
    \begin{proof}
    \todo[inline]{Proof or reference here}
    \end{proof}

The valuation on $\cO_{X,P}$ can be given as follows.
Let $t \in \cO_{X,P}$ be a generator of $\mathcal{M}_{X,P}$.
Now any $f \in \cO_{X,P}$ can be written as $f = ut^n$ for some unique $n \in \ZZ$ and some unit $u \in \cO_{X,P}\backslash \mathcal{M}_{X,P}$.
We then define \emph{the order of $f$ at $P$} to be $v_P(f) := n$.
We call any element $t \in \cO_{X,P}$ with order 1 at $P$ a \emph{uniformising parameter at $P$}.

\section{Differentials}

We now introduce the concept of a differential on the curve $X$.

Let $R$ be any commutative ring containing $k$ and let $M$ be an $R$-module.
Then a $k$-linear map $D \colon R \ra M$ satisfying $D(fg) = fD(g) + gD(f)$ is called a \emph{derivation} of $R$ in to $M$ over $k$.

There exists a unique module $\Omega_k(R)$, and a derivation $d \colon R \ra \Omega_k(R)$, through which all derivations must factor.
We can describe this more concretely as the free module generated by $[f]$ for all $f \in K(X)$, quotiented by the relations
    \begin{itemize}
    \item $[f]+[g] = [f+g]$;
    \item $[cf] = c[f]$;
    \item $[fg] = f[g] + g[f]$;
    \end{itemize}
where $f, g \in R$ and $c \in k$.

In particular, when $R = K(X)$ we let $\Omega_{K(X)} := \Omega_k(K(X))$, and we call the map $d \colon K(X) \ra \Omega_{K(X)}$ the \emph{differential map}.
We then call $\Omega_{K(X)}$ the \emph{module of differentials of $X$}, and we call any $ \omega \in \Omega_{K(X)}$ a \emph{meromorphic differential}.

    \begin{prop}\label{propdifferentialsareonedimensional}
    The module of differentials, $\Omega_{K(X)}$, is a one dimensional vector space over $K(X)$.
    \end{prop}
    \begin{proof}
    See \cite[Prop. 1.5.9]{stichtenoth}.\todo{check citation}
    \end{proof}

We suppose that $P \in X$ we choose a uniformising parameter $t \in \cO_{X,P}$.
Then for any $ 0 \neq \omega \in \Omega_{K(X)}$ there exists a unique integer $n \in \ZZ$ and unit $u \in \cO_{X,P}$ such that $\omega = ut^ndt$.
Then we define the \emph{order of $\omega$ at $P$} to be $\ord_P(\omega) := n$.
Note that this is well defined by Proposition \ref{propdifferentialsareonedimensional}.

We call differential on an open subset $U \subset X$ \emph{holomorphic on $U$} if $\ord_P(\omega) \geq 0$ for all $P \in U$, and we let
    \[
    H^0(U, \Omega_X) := \{ \omega \in \Omega_{K(X)} | \ord_P(\omega) \geq 0\ \text{for all}\ P \in X\}
    \]\todo{check spacing of ''for all"}
be \emph{the space of holomorphic differentials on $U$}.
If $\omega \in \Omega_{K(X)}$ is holomorphic on $X$ we say that $\omega$ is \emph{holomorphic}, and we let $\hzero$ be \emph{the space of holomorphic differentials}.

\section{The Riemann-Roch theorem}

We now recall the relevant facts and definitions needed to state the Riemann-Roch theorem.

We first recall that a \emph{divisor} on $X$ is a finitely supported formal sum 
    \[
    D = \sum_{P \in X} n_P[P].
    \]
The set off all divisors forms an additive group, $\di (X)$.
The \emph{degree} of the divisor $D$ is $\deg(D) = \sum_{P \in X} n_P$.
Given any function $f \in K(X)$ we have the \emph{divisor associated to $f$}, which is
    \[
    \di(f) := \sum_{P \in X} \ord_P(f) [P].
    \]
Note that this is well defined by Lemma. \todo{write and cite lemma about finitely many poles and zeroes}
We call any divisor $D$ which is equal to $\di(f)$ for some $f \in K(X)$ a \emph{principal divisor}.
Is is clear that for any $f, g \in K(X)$ we have $\di(fg) = \di(f) + \di(g)$.\todo{make same remark about orders}
Also, for any $f \in K(X)$ we define $\di_0(f)$ and $\di_\infty (f)$, the \emph{divisor of zeroes} and the \emph{divisor of poles} of $f$ respectively, as follows:
    \[
    \di_0(f) := \sum_{\ord_P(f) >0} \ord_P(f)[P]
    \]
and then
    \[
    \di_\infty(f) := \di_0(f) - \di(f).
    \]

Now for any differential $0 \neq \omega \in \Omega_{K(X)}$ we define the \emph{divisor associated to $\omega$} to be
    \[
    \di(\omega) := \sum_{P \in X} \ord_P(\omega).
    \]
If $W$ is a divisor on $X$ and $W = \di(\omega)$ for some $ \omega \in \Omega_{K(X)}$ then we say that $W$ is a \emph{canonical divisor} on $X$.

The principal divisors of $X$ form a subgroup of $\di(X)$, and we say that two divisors $D, D' \in \di(X)$ are equivalent, denoted $D \tilde D'$, if their image in the quotient of $\di(X)$ by the group of principal divisors is the same; \ie if there exists $f \in K(X)$ such that $ D = D' + \di(f)$.
By the following, it makes sense to refer to \emph{the} canonical divisor on $X$, up to equivalence, which we write as $K_X$.

    \begin{thm}
    Let $W$ and $W'$ be canonical divisors on $X$.
    Then there exists some $f \in K(X)$ such that $W = W' + \di(f)$.
    Moreover, the divisor $W + \di(f)$ is canonical for every $f \in K(X)$.
    \end{thm}
    \begin{proof}
    The first statement follows from the fact that $\Omega_{K(X)}$ is a $K(X)$ and from the definition of canonical divisor.
    Suppose that $\omega, \omega' \in \Omega_{K(X)}$ are the differentials such that $W = \di(\omega)$ and $W' = \di(\omega')$.
    Then, by Proposition \todo{reference one dim prop} there exists an $f \in K(X)$ such that $\omega = f \omega'$.
    Then the first statement follows once we take the divisor of both sides.
    \end{proof}

Given any divisor $D = \sum_{P \in X} n_P[P]$ we let
    \[
    H^0(X,\cO_X(D)) : = \{ f \in K(X) | \ord_P(f) \geq n_P\ \text{for all}\ P \in X\}
    \]
be the \emph{vector space of meromorphic functions associated to $D$}.
Similarly, we let 
    \[
    H^0(X,\Omega_X(D)) :  = \{ \omega \in \omega_{K(X)} | \ord_P(\omega) \geq n_P \ \text{for all} \ P \in X\}
    \]
be the \emph{vector space of meromorphic differentials associated to $D$}.\todo{check spacing of ''for all" in sets}
In particular, when $D$ is the zero divisor we have $H^0(X,\Omega(0)) = \hzero$, and similarly $H^0(X,\cO_X(0)) = H^0(X,\cO_X)$.

We now state the celebrated Riemann-Roch theorem.

    \begin{thm}[Riemann-Roch theorem]
    Let $D$ be any divisor on $X$, and let $W$ be any canonical divisor on $X$.
    Then
        \[
        \dim_k(H^0(X,\Omega_X(D))) = \deg(D) + 1 - g_X + \dim_k(H^0(X,\Omega)X(W-D)), 
        \]
    for some constant $g_X \in \ZZ_{\geq 0}$, which is independent of the choice of $W$ and $D$.
    \end{thm}
    \begin{proof}
    See, for example, \todo{reference hartshorne and fulton}
    \end{proof}

    \begin{defn}
    We call the constant $g_X$ in the statement of the Riemann-Roch theorem the genus of $X$.
    \end{defn}

The genus is an invariant of fundamental importance in the study of algebraic curves.
In particular, we remark that if $k = \CC$ then the genus of an algebraic curve (also called the arithmetic genus) is the same as the topological genus of the corresponding Riemann surface.

We now give a corollary to the Riemann-Roch theorem, which shows some of the properties of the genus.

    \begin{cor}\label{dim=gc}
    For any canonical divisor $W$ on $X$, we have 
        \[
        \deg(W) = 2g_X-2
        \]
    and 
        \[
        \dim H^0(X,\cO_X(W)) = g_X.
        \]
    \end{cor}
    \begin{proof}
    Since $\dim H^0(X,\cO_X(0)) = 1$ (the only functions with no poles are the constant functions), we have by the Riemann-Roch theorem, 
        \[
        1= \dim H^0(X,\cO_X(0)) = 0 + 1 -g_X + \dim H^0(X,\cO_X(W)).
        \]
    Rearranging this gives the second statement.
    The first statement then follows by rearranging
        \begin{multline*}
        g_X = \dim H^0(X,\cO_X(W)) = \deg(W) + 1 -g_X +  \dim H^0(X,\cO_X(W-W))\\ = \deg(W) + 1 -g_X + 1.
        \end{multline*}
    \end{proof}

\section{Ramification and the Hurwitz formula}

In this section we will introduce the concept of ramification, and conclude by stating the Hurwitz formula, relating the genera of two curves with a map between via the ramification divisor.



Let $X$ and $Y$ be curves over $k$.
We start doing this by defining what it means for a map $\phi \colon X \ra Y$ to be a morphism of curves.
We first note that given an map of sets $\phi \colon X \ra Y$ we have an induced ring homomorphism on the function fields,
    \[
    \phi^* \colon K(Y) \ra K(X),
    \]
given by composition with $\phi$.\todo{define $\phi^*$ in words}

Then a \emph{morphism of curves} is a continuous map $\phi \colon X \ra Y$ such that for every open set $U \subseteq Y$ we have
    \[
    \phi^*(H^0(U,\cO_Y)) \subseteq H^0(\phi^{-1}(U),\cO_X).
    \]

A particular manner in which morphisms often arise comes from considering the quotient of $X$ by some subgroup $G$ of the automorphism group $\aut(X)$.
Then we have a natural projection $\pi \colon \ra X/G$, which is a morphism of curves.
The majority of the topics considered in this thesis will focussed on situations where we have such a projection.

We not return to assuming that $\phi \colon X \ra Y$ is an arbitrary morphism of curves.

    \begin{defn}
    For any point $P \in X$ the ramification index $e_P$ of $\phi$ at $P$ is defined as follows: let $t \in \cO_{Y,f(P)}$ be a uniformising parameter; then 
        \[
        e_P := \ord_P(\phi^*(t)).
        \]
    \end{defn}

Note that $e_P =1$ for almost all points $P \in X$.
We say that the point $Q \in Y$ is \emph{branch point} of $\phi$ is there exists some $P \in \phi^{-1}(Q)$ for which $e_P >1$.
We say that $P \in X$ is a \emph{ramification point} of $X$ if $e_P >1$.
Suppose $P \in X$ is a ramification point.
Then if $p = \cha(k)$ divides $e_P$ we say that $P$ is \emph{wildly ramified}, and we also say $\phi$ is wildly ramified if this holds for any point in $X$.
Otherwise we say that $P$ is tamely ramified.

    \begin{defn}
    Let $D = \sum_{Q \in Y}n_Q [Q]$ be a divisor on $Y$.
    Then the pull back of $D$ with respect to $\phi$ is
        \[
        \phi^*(D) := \sum_{Q \in Y} \sum_{P \mapsto Q} e_P \cdot n_Q [Q].
        \]
    \end{defn}

Note that $\phi^*$ defines a group homomorphism $\di(Y) \ra \di(X)$.

    \begin{defn}[Ramification divisor]
    The ramification divisor of $\phi \colon X \ra Y$ is 
        \[
        R:= \sum_{P \in X} \delta_P [P].
        \]
    If $\phi$ is tamely ramified then 
        \[
        R: = \sum_{P \in X} (e_P - 1)[P].
        \]
    \end{defn}

Hilbert's formula, stated below, gives an alternative presentation of the ramification divisor, which will ease computations later in the thesis.
However, in order to do this we need to introduce higher ramification groups.

   \begin{defn}
    Let $G:=\gal(X/Y)$ and let $t$ be a uniformising parameter at $P\in X$.
    Then for $i\geq -1$ we define the $i^{th}$ ramification group at $P$, denoted $G_i(P)$, to be the subgroup of $s\in G$ such that $i_G(s) := \ord_P(s(t)-t)$ is at least $i+1$.
    This is	independent of the choice of $t$, see \cite[Chap. IV, \S 1, pg. 62]{localfields}.
    \end{defn}

Note that for any $P\in X$ we have that $G_{-1}(P)=G$, if $i$ is sufficiently large then $G_i(P)$ is trivial and $G_i(P)\supseteq G_{i+1}(P)$.
Also, $G_1$ is a $p$-group and $\ord(G_0(P)/G_1(P))$ is co-prime to $p$.
In particular, $\pi$ is tamely ramified at $P$ if and only if $G_1(P)$ is the trivial group.
More details can be found in \cite[Chap. IV, \S 1]{localfields}.%Citation is slightly ambiguous, but only references four pages, so is okay.

Note that $e_P = \ord (G_0(P))$ for any $P \in X$.
Also, for any $Q \in Y$ we write $\delta_Q$ for $\delta_P$ and $e_Q$ for $e_P$, where $P\ \in \pi^{-1}(Q)$.\todo{explain why this is well defined}
We now state Hilbert's formula, relating our definition of the ramification divisor in Chapter \ref{Chapter:hurwitzformula} (see Definition \ref{definitionramificationdivisor}) to the ramification groups, making future computations easier.


    \begin{thm}[Hilbert's Formula]\label{hilbertsformula}
    Suppose that $P\in X$ and that $t$ is a uniformising parameter in $\cO_{X,P}$.
    Then we have
        \begin{equation}
        \delta_P = \sum_{s\neq e}i_G(s)=\sum_{j=0}^{\infty}\left(\ord(G_i(P))-1\right),\label{ramdiv}
        \end{equation}
    where $e$ denotes the identity in $G$.
    \end{thm}
    \begin{proof}
    For the sake of brevity we do not prove these statements here. See \cite[Chap. IV, \S 1, Prop. 4]{localfields} for a proof of Hilbert's formula.
    \end{proof}

 
Given any differential $ \omega = gdf \in \Omega_{K(Y)}$ we define the pullback of $\omega$ by $\phi$ to be
    \[
    \phi^*(\omega) := \phi^*(g)d\phi^*(f).
    \]
Clearly $\phi^*(\omega)$ is a differential on $X$.

    \begin{thm}
    If $0 \neq \omega \in \Omega_{K(Y)}$ and $W$ is the divisor associated to $\omega$, then
        \begin{equation}\label{equationstronghurwitzformula}
        \di(\phi^*(\omega)) = \phi^*(\di(\omega)) + R.
        \end{equation}
    In particular, we have
        \[
        K_X \tilde \phi^*(K_Y) + R.
        \]
    \end{thm}
    \begin{proof}
    See \todo{reference Stichtenoth and hartshorne}
    \end{proof}


As a corollary to this we have the Riemann-Hurwitz formula.

    \begin{cor}\label{hur}[Riemann-Hurwitz Formula]
    Given two non-singular projective curves $X$ and $Y$ of genera $g_X$ and $g_Y$ respectively, with a degree $n$ map $\pi\colon X \rightarrow Y$, then
        \[
        2g_X - 2 = n(2g_Y -2) + \deg(R),
        \]
    where $R$ is the ramification divisor of $\pi$.
    \end{cor}
    \begin{proof}
    This follows from Corollary \ref{dim=gc}, after taking degrees in \eqref{equationstronghurwitzformula}.
    \end{proof}




















