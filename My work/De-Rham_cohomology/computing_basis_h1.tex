% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[draft, 11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margins=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{mathtools}
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{amsopn}
\usepackage{amssymb}
\usepackage{natbib}
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%Theorems and stuff
\theoremstyle{plain}
\newtheorem{defn}{Definition}[section]
\newtheorem{thm}[defn]{Theorem}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{ex}[defn]{Example}
\newtheorem*{unnumthm}{Theorem}
\newtheorem{defnlem}[defn]{Definition/Lemma}
\newtheorem{defnthm}[defn]{Theorem/Definition}
\theoremstyle{remark}
\newtheorem*{rem}{Remark}


\newcommand{\cO}{{\cal O}}
\newcommand{\ra}{\rightarrow}
\newcommand{\NN}{{\mathbb N}}
\newcommand{\PP}{{\mathbb P}}
\newcommand{\ZZ}{{\mathbb Z}}
\newcommand{\cL}{{\mathcal L}}
\newcommand{\cA}{{\mathcal A}}
\newcommand{\cD}{{\mathcal D}}


\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\res}{Res}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\di}{div}
\DeclareMathOperator{\cha}{char}
\DeclareMathOperator{\gal}{Gal}
\DeclareMathOperator{\Tr}{Tr}

%%% END Article customizations

%%% The "real" document content comes below...

\title{}
\author{}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle


Let $X$ be a smooth, projective, connected hyperelliptic curve of genus $g$ over an algebraically closed field $k$ of characteristic unequal to 2.
Let $x:X\rightarrow \mathbb P_k^1$ be the corresponding holomorphic map of degree two.
There is then a corresponding field extension of $k(x)$ by $y$, where $y$ is defined by
\[
y^2 = f(x),
\]
for some $f(x)\in k[x]$.
By an automorphism of $X$ we may assume that $0$ and $\infty$ are branch points.
We let $P_0$ and $P_\infty$ be the unique points in $x^{-1}(0)$ and $x^{-1}(\infty)$ respectively.
We may also assume that $f(x) = a_{2g+1}x^{2g+1} + a_{2g}x^{2g} + \ldots + a_0$ for some $a_i \in k$.
If $a_{2g}=0$ we can use a third automorphism to adjust the roots, and hence we may assume that $a_{2g} \neq 0$.


In the paper of Hortsch, we take the pairing $\langle y^{-1}x^idx, yx^{-j} \rangle = \res(x^{i-j}dx)$.
We consider the same pairing to start with.
In order to compute the residue we require there to be a pole at $P_0$ and $P_\infty$. 
To demonstrate this we compute the divisor
\begin{eqnarray}
	\di(x^{i-j}dx) & = &  2(i-j)P_0  2(j-i)P_\infty + R - 2D_\infty \\
	& = & (2i-2j+1)P_0 +(R-P_0-P_\infty) +(2j-2i-3)P_\infty.
\end{eqnarray}

Recall that since both $P_\infty$ and $P_0$ are ramification points it follows that $R-P_0-P_\infty$ is positive.
Hence we have a pole at both $P_0$ and $P_\infty$ if and only if $i=j+1$.
So we will be considering the differential $\frac{1}{x}dx$.
{\bf Note - I think that the coefficient of $P_0$ and $P_\infty$ should be the same, as if $t$ is a U.P. at $P_\infty$ then $t^{-1}$ is a U.P. at $P_0$, and so I think that $s\in G$ should act in such a way that if $s(t)-t$ should have minus the order of $s(t^{-1}) -t^{-1}$ at $P_\infty$. Maybe :s}

Now we need to compute the residue of $x^{-1}dx$ at $P_\infty$.
To start with we note that $t:= \frac{y}{x^{g+1}}$ is a uniformising parameter at $P_\infty$.
We can compute the order of $t$ at $P_\infty$; the computation follows simply from the fact that $t^2 = \frac{f(x)}{x^{2g+2}}$, which gives
\[
ord_{P_\infty}(t) = \frac{1}{2}\ord_{P_\infty}(f(x)) - \frac{1}{2}d_{P_\infty}(x^{2g+2}) = -(2g+1) + (2g+2) = 1.
\]

We now write $\frac{1}{x}dx$ in terms of $dt$.
First, 
\[
dt^2 = f\cdot d\frac{1}{x^{2g+2}} + \frac{1}{x^{2g+2}} \cdot df.
\]
Now 
\[
f\cdot d\frac{1}{x^{2g+2}} = f\cdot \frac{2g+1}{x^{2g+3}} dx \ {\rm and}\ \frac{1}{x^{2g+2}} \cdot df = \frac{1}{x^{2g+2}}\cdot f' \cdot dx.
\]
So in total 
\[
dt^2 = \left (\frac{(2g+1)\cdot f}{x^{2g+3}} - \frac{f'}{x^{2g+2}} \right ) dx.
\]

Finally, we have $\frac{1}{x}dx = \frac {2\cdot x^{2g+1}}{\left ( (2g+1)\cdot \frac{f}{x} - f' \right )} \cdot t dt$.

Let $h(x) = (2g+1)\cdot \frac{f}{x} - f'$.
Note that $\deg(h(x)) = 2g-1$ since we assumed that $a_{2g}\neq 0$.
Hence $\ord_{P_\infty}\left ( \frac{2\cdot x^{2g+1}}{h(x)} \right ) = -2(2g+1) + 2(2g-1) = -4$.
We want to compute the coefficent of $t^{-2}$ in the laurent series of this.
This is because the residue of $\frac{1}{x}dx$ is the coefficient of $t^{-1}$ in $\frac{2x^{2g+1}}{h(x)}\cdot t$, which is the coefficient of $t^{-2}$ in $\frac{2x^{2g+1}}{h(x)}$.


Note that 
\begin{eqnarray}\label{h(x)}
h(x) & = & \left( \frac{a_{2g}(2g+1)x^{2g-1}}{x^{2g+1}} - \frac{2g\cdot a_{2g}\cdot x^{2g-1}}{x^{2g+1}} \right) \nonumber \\
& ~ & + \left(\frac{a_{2g-1}\cdot(2g+1)\cdot x^{2g-2}}{x^{2g+1}} - \frac{(2g-1)\cdot a_{2g-1} \cdot x^{2g-2}}{x^{2g+1}} \right) + \ldots \nonumber \\
& = & \frac{a_{2g}}{x^2} + \frac{2\cdot a_{2g-1}}{x^3} + \ldots
\end{eqnarray}

Also note that 
\begin{eqnarray}\label{t^4}
t^4 & = & \frac{f(x)^2}{x^{4g+4}} \nonumber \\
& = & \frac{a_{2g+1}^2 x^{4g+2}}{x^{4g+4}} + \frac{2\cdot a_{2g}\cdot a_{2g+1} \cdot x^{4g+1}}{x^{4g+4}} + \ldots \nonumber \\
& = & \frac{a_{2g+1}^2}{x^2} + \frac{2\cdot a_{2g} \cdot a_{2g+1}}{x^3} + \ldots
\end{eqnarray}

So if we write $h(x) = \sum_{i\geq 4} c_i t^i$ then we must have $c_4 = \frac{a_{2g}}{a_{2g+1}^2}$ in order that the coefficients of $\frac{1}{x^2}$ are equal.

We now compute the $c_6$ expansions of $h(x)$.

We know that the lead term of $t^6 = \frac{f(x)^3}{x^{6g+6}}$ is $\frac{2a_{2g}^2}{a_{2g+1}x^3}$.
So $c_6$ must satisfy
\[
\frac{2a_{2g-1}}{x^3} = \frac{c_4\cdot 2 \cdot a_{2g} \cdot a_{2g+1}}{x^3} + \frac{c_6 \cdot a_{2g+1}^3}{x^3},
\]
from \eqref{h(x)} and \eqref{t^4}.

Hence we can easily derive $c_6 = \frac{2\cdot a_{2g-1} \cdot a_{2g+1} - 2a_{2g}^2}{a_{2g+1}^4}$.


We then suppose that $\frac{1}{h}  = \sum_{i\geq -4} d_it^i$, and then we have $\sum c_it^i \cdot \sum d_it^i = 1$.
As described earlier we want to compute $d_{-2}$.
Expanding the product of the sums we see
\[
1 = c_4\cdot d_{-4} + (c_6\cdot d_{-4} + c_4\cdot d_{-2})t^2 + \ldots
\]
So $c_4 \cdot d_{-4} = 1$ and hence $d_{-4} = \frac{1}{c_4}$.



Then we also have $c_6d_{-4} + c_4d_{-2} = 0$ and hence $d_{-2} = -\frac{c_6d_{-4}}{c_4} = -\frac{c_6}{c_4}$.
So in total  
\[
d_{-2} = \frac{a_{2g+1}^4}{a_{2g}^2} \cdot \left( \frac{2a_{2g-1}a_{2g+1} - 2a_{2g}^2}{a_{2g+1}^4} \right) = \frac{2a_{2g-1}a_{2g+1} - 2a_{2g}^2}{a_{2g}^2}.
\]

Now we can assume that $a_{2g+1} = 1$, since this will not affect the curve.
This reduces the task of showing that the residue is non-zero to showing that $a_{2g-1} -a_{2g}^2 \neq 0$.
But if we write the roots of $f(x)$ as $\alpha_i \in k$ with $1\leq i \leq 2g+1$ then we can see that $a_{2g-1} -a_{2g}^2 = \sum_{i=1}^{2g+1}\alpha_i^2$.
 
{\bf If this sum is zero, then by an automorphism of the curve we can change one of the roots by a small value, and hence make it non-zero. 
Indeed, we can fix all but one root, say $\alpha_1$. Then there is only one value of $\alpha_1$ such that $a_{2g}=0$, and there are only two values of $\alpha_1$ such that $\sum_{i=1}^{2g+1}\alpha_i^2 = 0$. Since $k$ is infinite we can certainly ensure that our automorphism of $X$ sends $\alpha_1$ to an element of $k$ distinct from these three values.

Note that this relies on 0 and $\infty$ not being the only roots, but this only occurs if the defining equation is $y^2 = x^{2g+1}$, which can be considered seperately if needed.}



\begin{comment}
Try using a different uniformising parameter.
Let $t=\frac{y}{x^{g+1}+x}$.
Then 
\begin{eqnarray}
dt^2 & = & d\frac{f(x)}{(x^{g+1}+x)^2} \\
& = & 	\frac{1}{(x^{g+1}+x)^2}df + fd\left ( \frac{1}{(x^{g+1}+x)^2} \right ) \\
& = & 	\frac{1}{(x^{g+1}+x)^2}\cdot f'dx - \frac{2f((g+1)x^g + 1)}{(x^{g+1}+x)^3}dx \\
& = &  \frac{1}{x(x^g1)^2} \left ( f' - \frac{2f((g+1)x^{g+1}+1)}{(x^{g+1}+x)} \right) \frac{1}{x}dx 
\end{eqnarray}

We would like to compute $x$ in terms of the local parameter $t$.
We can possibly do this by writing $\frac{1}{x}$ in terms of $t$, and then using the fact that $x\cdot \frac{1}{x} = 1$ to complete the exercise.

In particular 
\[
\frac{1}{x}dx  = 
\]
Note - if the lead terms of the demoninator (i.e. $h(x)$) do not cancel then the residue should be easy to compute.
\end{comment}
\bibliography{/home/jtait/files/Documents/Maths/Bibliography/biblio.bib}
%\bibliography{/home/joe/files/Documents/Maths/Bibliography/biblio.bib}
\bibliographystyle{plain}


\end{document}
