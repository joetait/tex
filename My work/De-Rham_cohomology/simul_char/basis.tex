% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[draft, 11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margins=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{todonotes}

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{mathtools}
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{amsopn}
\usepackage{amssymb}
\usepackage{natbib}
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%Theorems and stuff
\theoremstyle{plain}
\newtheorem{defn}{Definition}[section]
\newtheorem{thm}[defn]{Theorem}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{ex}[defn]{Example}
\newtheorem*{unnumthm}{Theorem}
\newtheorem{defnlem}[defn]{Definition/Lemma}
\newtheorem{defnthm}[defn]{Theorem/Definition}
\theoremstyle{remark}
\newtheorem*{rem}{Remark}


\newcommand{\cO}{{\cal O}}
\newcommand{\ra}{\rightarrow}
\newcommand{\NN}{{\mathbb N}}
\newcommand{\PP}{{\mathbb P}}
\newcommand{\ZZ}{{\mathbb Z}}
\newcommand{\cL}{{\mathcal L}}
\newcommand{\cA}{{\mathcal A}}
\newcommand{\cD}{{\mathcal D}}
\newcommand{\cU}{{\mathcal U}}


\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\res}{Res}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\di}{div}
\DeclareMathOperator{\cha}{char}
\DeclareMathOperator{\gal}{Gal}
\DeclareMathOperator{\Tr}{Tr}

%%% END Article customizations

%%% The "real" document content comes below...

\title{}
\author{}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle

\section{Characteristic not 2}


Let $X$ be a smooth, projective, connected hyperelliptic curve of genus $g \geq 2$ over an algebraically closed field $k$ of characteristic $p$.

We wish to compute a basis for the first de-Rham hypercohomology of this curve, which we denote by \todo{define this}{$H^1_{dR}(X/k)$.} 
To do this we use the fact that we have the following short exact sequence:
\begin{equation}\label{ses}
0 \ra H^0(X,\Omega_X) \ra H^1_{dR}(X/k) \ra H^1(X,\cO_X) \ra 0.
\end{equation}

We use \v{C}ech cohomology for our computations.
We have an affine open cover by $U_1 = X\backslash P_0$ and $U_2 = X \backslash P_\infty$, which we denote by ${\cal U} = \{ U_1, \ U_2\}$.
\todo{find citation}{By definition}  $\check{H}_{dR}^1(\cU)$ is the quotient of the $k$-vector space 
\[
\{(\omega_1, \omega_2, f_{12}) | \omega_i\in \Omega_{X/k}(U_i), f_{12}\in \cO_X(U_1 \cap U_2), df_{12} = \omega_1 - \omega_2\}
\]

by the subspace
\[
\{ (df_1, df_2, f_1-f_2)|f_i \in \cO_X(U_i)\}.
\]

In order to compute this basis we will first give a basis of $H^1(X,\cO_X)$(a basis of $H^0(X,\Omega_X)$ is already available in the literature, for example \todo{insert reference}). This will depend upon the defining equations for the associated field extension of $K(x)$ that we choose, and this in turn will depend on whether $p=2$ or not.

If $p \neq 2$ then our extension of $k(x)$ will be $k(x,y)$ where $y$ satisfies 
\[
	y^2 = f(x)
\]
for some polynomial $f \in k[x]$ of degree $2g+1$ or $2g+2$ and with no repeated roots.
By an autopmorphism of $\mathbb P_k^1$ we may assume that $\deg(f) = 2g+1$ and moreover that $0$ and $\infty$ are branch points.
We will denote the pre-images of $0$ and $\infty$ under $x$ by $P_0$ and $P_\infty$ respectively.

We recall that $\di (R) = \di(y) + (g+1)[P_\infty]$ and that $\di( dx) = R - 4[P_\infty]$.

On the other hand, if $p=2$, then our extension will be $k(x,y)$, this time with $y$ defined by
\[
	y^2 - H(x)y = F(x),
\]
where $H(x)$ and $H'(x)^2F(x) + F'(x)^2$ share no roots.

\todo[inline]{note if I need to add other relations here}
We recall the following divisors, which we will make use of throughout this article:
\begin{eqnarray*}
\di (dx) & = & R - 4[P_\infty] \\
\di (h(x)) & = & R - 2(g+1)[P_\infty] \\
\di (x^i) & = & 2i[P_0] - 2i[P_\infty]\\
\di (y) & = & \di_0(y) - (2g+1)[P_\infty].
\end{eqnarray*}
Finally, to define the ramification divisor we suppose that \todo{check this notation doesn't clash with anything else}{$H(x) = \prod_{i=1}^d (x-a_i)^{n_i}$} for some $d \leq g$.
Then $a_i \in \mathbb P_k^1$ are the branch points of $x$ and we let $P_i \in X$ be the correspding ramification points of $x$.
Then 
\[
R = \sum_{i=1}^d 2n_i[P_i] - (g+1-d)[P_\infty].
\]


In order to state the basis of $H^1(X,\cO_X)$, as well as to shorten the proof of the following proposition, we define the following polynomial and differentials.
Suppose that $1 \leq i \leq g$
Firstly, when $p\neq 2$ we define 
\[
	s_i(x) := f'(x) - \frac{2if}{x}
\]
and is $p = 2$ we define
\[
	S_i(x) := xF'(x) + xyH'(x) + iyH(x)
\].

We then let $\phi_i$ and $\psi_i$ be all the terms of $s_i(x)$ with degrees greater than $g$ and less than or equal to $g$ respectively.
Similarly, we let $\Phi_i$ and $\Psi_i$ be the monomials of $S_i(x)$ where the degree of the $x$ component is greater than or equal to $i$ and less than $i$ respectively.

We can now give a basis for $H^1(X,\cO_X)$.

\begin{prop}\label{basis}

Let $i=1,\ldots g$. If $p\neq 2$ then a basis of $H^1(X,\cO_X)$ is given by 
\[
	\left( \left( \frac{-\psi}{2yx^i}\right) dx, \left(\frac{\phi}{2yx^i}\right) dx, x^{-i}y\right)
\]

and if $p=2$ then a basis is given by
\[
	\left( \left(\frac{-\Psi}{x^{i+1}h}\right) dx, \left( \frac{\Phi}{x^{i+1}h} \right) dx, x^{-i}y \right).
\]
\end{prop}


\begin{proof}

We start by showing that $x^{-i}y$ is a viable choice for the third component of both sets of bases.

From the earlier description of Serre duality, it is clear that if $\omega_i$ is a basis of $H^0(X, \Omega_X)$ then we require that the image of the residue map, ${\rm Res}(\omega_i, x^{-i}y)$ is non-zero.

If $p \neq 2$ then $\omega_i = \frac{x^{i-1}}{y}dx$ is a basis of $H^0(X, \Omega_X)$. 
Then ${\rm Res}(\omega_i, x^{-i}y) = res(x^{-1}dx)$ should be non-zero on $U_1$ and $U_2$, or equivalently $x^{-1}dx$ should have a pole of order one at both $P_0$ and $P_\infty$ (recall that the differential needs to be regular on $U_1 \cap U_2$).
The divisor of $x^{-1}dx$ is
\begin{eqnarray}
\di (x^{-1}dx) & = & \di(dx) - \di (x) \\
& = & R - 4[P_\infty] - 2[P_0] + 2[P_\infty] \\
& = & (R-[P_0]-[P_\infty]) - [P_0] - [P_\infty].
\end{eqnarray}
Since $R -[P_0]-[P_\infty]$ is a positive divisor with no $[P_0]$ or $[P_\infty]$ terms we see that $x^{-1}dx$ does indeed have a pole of order one at both $P_0$ and $P_\infty$.

If $p=2$ then a basis of $H^0(X,\Omega_X)$ is given by $\omega_i = \frac{x^{i-1}}{h(x)}dx$, and again we compute the divisor of $x^{-i}y\cdot \omega_i = \frac{y}{xh(x)}dx$.
\begin{eqnarray}
\di\left( \frac{y}{xh(x)}dx \right) & = & \di(y) + \di(dx) - \di(x) - \di(h(x)) \\
& = & \di_0(y) -2[P_0] -[P_\infty],
\end{eqnarray}
where $\di_0$ denotes the divisor of zeroes of a function, or the positive part of the divisor.
Now we know that $y$ has a zero of order at most 1 at $P_0$. \todo{justify order at most 1 statement}

Now that we know $xy^{-i}$ is the third part of the triple making the basis, we need to find two differentials, one regular on $U_1$ and the other regular on $U_2$, such that their difference is $d(x^{-i}y)$.

We again treat the cases $p=2$ and $p=\neq 2$ seperately.
We start by rewriting $d(x^{-i}y)$ in terms of $dx$.
We note that
\begin{eqnarray*}
2yx^{-i}d(yx^{-i}) & = & d(yx^{-i})^2 \\
& = & dfx^{-2i} \\
& = & fdx^{-2i} + x^{-2i}df \\
& = & -f\cdot\frac{2i}{x^{2i+1}}dx + \frac{f'}{x^{2i}}dx \\
& = & \frac{1}{x^{2i}}\left( f' - \frac{2if}{x}\right) dx 
\end{eqnarray*}

and hence it follows that 
\begin{equation*}
d \left( yx^{-i} \right) = \frac{1}{2yx^{i}}\left( f' - \frac{2if}{x} \right) dx = \frac{s_i(x)}{2yx^i}dx.
\end{equation*}

We define $\alpha^i_j$ for $1\leq j \leq 2g$, such that
\[
	$s_i(x) = \alpha^i_{2g}x^{2g} + \ldots + \alpha^i_0, 
\]
and then 

\end{proof}


\begin{comment}
We define $\alpha^i_j$ and $\Alpha^i_{j+1}$ for $0 \leq j \leq 2g$, and $\Beta_k^i$ for $1\leq k \leq g$, such that
\[
	$s_i(x) = \alpha^i_{2g}x^{2g} + \ldots + \alpha^i_0 \ {\rm and } \ S_i(x) = \alpha_{2g+1}^ix^{2g+1} + \ldots + \alpha^i_1 x + y(\Beta_g^i x^i + \ldots + \Beta_1^i x).
\] 
\end{comment}


	




\end{document}
